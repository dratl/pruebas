<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>The Switcher</title>
<style>
    .switcher {
        display: flex;
        flex-wrap: wrap;
        /* ↓ The default value is the first point on the modular scale */
        gap: var(--gutter, var(--s1));
        /* ↓ The width at which the layout “breaks” */
        --threshold: 60rem;
        /*  ↓ Spacing unit */
        --s1: 1rem;
        /*  ↓ Default gutter between items */
        --gutter: var(--s1);
    }

    .switcher>* {
        /* ↓ Allow children to grow */
        flex-grow: 1;
        /* ↓ Switch the layout at the --threshold */
        flex-basis: calc((var(--threshold) - 100%) * 999);
    }

    .switcher> :nth-last-child(n+5),
    .switcher> :nth-last-child(n+5)~* {
        /* ↓ Switch to a vertical configuration if there are more than 5 child elements */
        flex-basis: 100%;
    }

    /* Aplica solo a <div> sin class (o con class vacío) dentro de .switcher */
    .switcher>div:not([class]),
    .switcher>div[class=""] {
        border: 1px solid black;
    }
</style>
</head>
<body>
  <h1>The Switcher</h1>

  <div class="switcher">
    <div>Item 1</div>
    <div>Item 2</div>
    <div>Item 3</div>
    <div>Item 4</div>
  </div>
</body>
</html>